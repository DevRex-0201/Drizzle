import { Tab, Tabs } from 'nextra-theme-docs';

import SmallTerminal from '../../../components/SmallTerminal/SmallTerminal';

import installationNpm from '../../../scripts/postgresjs/npm.json';
import installationPnpm from '../../../scripts/postgresjs/pnpm.json';
import installationYarn from '../../../scripts/postgresjs/yarn.json';

# Drizzle ORM | [Postgres.js](https://github.com/porsager/postgres) driver

## Installation

<Tabs items={['npm', 'pnpm', 'yarn']}>
  <Tab>
    <SmallTerminal withoutMargin data={installationNpm} height="32px" />
  </Tab>
  <Tab>
    <SmallTerminal withoutMargin data={installationPnpm} height="32px" />
  </Tab>
  <Tab>
    <SmallTerminal withoutMargin data={installationYarn} height="32px" />
  </Tab>
</Tabs>

## Connection

```typescript copy
import { drizzle, PostgresJsDatabase } from 'drizzle-orm/postgres-js';
import postgres from 'postgres';

const client = postgres(connectionString);
const db: PostgresJsDatabase = drizzle(client);
```

See [main docs](../postgresql#sql-schema-declaration) for further usage.

## Running migrations

In order to run the migrations, [you need to use `max: 1` in the postgres.js connection options](https://github.com/porsager/postgres#unsafe_transaction). You can create a separate connection instance for migrations with that setting.

```typescript copy
import postgres from 'postgres';
import { migrate } from 'drizzle-orm/postgres-js/migrator';

const migrationsClient = postgres(connectionString, {
  max: 1,
});
const db = drizzle(migrationsClient);
await migrate(db, { migrationsFolder: '...' });
```

See [main migrations docs](../postgresql#migrations) for further info.